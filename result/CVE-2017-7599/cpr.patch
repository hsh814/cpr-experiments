--- backup.c	2022-06-27 03:11:53.257541153 +0000
+++ libtiff/tif_dirwrite.c	2022-06-27 03:11:53.293541183 +0000
@@ -977,7 +977,9 @@
 			else if (tif->tif_dir.td_bitspersample<=16)
 			{
 				for (i = 0; i < count; ++i)
+{ if(value[i] == value[i]) value[i]=32767;
 					((int16*)conv)[i] = (int16)value[i];
+}
 				ok = TIFFWriteDirectoryTagSshortArray(tif,ndir,dir,tag,count,(int16*)conv);
 			}
 			else
