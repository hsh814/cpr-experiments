--- backup.c	2022-06-27 03:08:53.393601685 +0000
+++ jdmarker.c	2022-06-27 03:08:53.421601640 +0000
@@ -323,8 +323,9 @@
 
   /* Collect the component-spec parameters */
 
-  for (i = 0; i < cinfo->num_components; i++)
+for (i = 0; i < cinfo->num_components && (MAX_COMPS_IN_SCAN != 4) ; i++) {
     cinfo->cur_comp_info[i] = NULL;
+}
 
   for (i = 0; i < n; i++) {
     INPUT_BYTE(cinfo, cc, return FALSE);
