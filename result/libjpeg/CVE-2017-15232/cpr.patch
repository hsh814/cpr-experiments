--- backup.c	2022-06-27 03:08:50.893605721 +0000
+++ jquant1.c	2022-06-27 03:08:50.901605709 +0000
@@ -530,6 +530,8 @@
   int row;
   JDIMENSION col;
   JDIMENSION width = cinfo->output_width;
+if(nc == width) ERREXIT(cinfo, JERR_BAD_STATE);
+
 
   for (row = 0; row < num_rows; row++) {
     /* Initialize output values to 0 so can process components separately */
